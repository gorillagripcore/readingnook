<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reading Nook</title>
  <link rel="icon" type="image" href="">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bitter:wght@300&display=swap" rel="stylesheet">
</head>

<body>
  {% include 'navbar.html' %}
  <header style="margin-top: 50px;"></header>

  <div class="container text-center">
    <div class="row">
      <div class="col-3" style="margin-right: 42px;">
        <!--Empty Sides-->
      </div>
      <div class="col-5 section" style="width: 600px;">

        <div class="container text-center">
          <div class="row">
            <div class="col">
              <!--Profile Picture-->
              <div class="pfp_container">
                <img src="{{pfp}}" alt="pfp" class="pfp">
              </div>
              <!--Dialog box for profile picture-->
              <input type="submit" value="Change pic" class="form-control btn pfp_btn" name="" id="openpfpDialogBtn"
                style=" width: 80px; background-color: #c8ebf7; font-size: x-small;">

              <dialog id="pfp_dialog" class="dialog_box">
                <div class="dialog">
                  <form class="form-group" action="{{ url_for('pfp') }}" method="post">
                    <input type="text" class="form-control" name="pfp" placeholder="Link please" id="pfp" required>
                    <label> </label>
                    <input type="submit" value="Submit" class="form-control btn" name=""
                      style="width:80px; margin-top: 10px; background-color: #c8ebf7;">
                  </form>
                </div>
              </dialog>
            </div>

            <!--Name and Description-->
            <div class="col-4 name_desc">
              <h2>{{ username }}</h2>
              <p>{{user_desc}}</p>

              <input type="submit" value="Change desc" class="form-control btn pfp_btn" name="" id="opendescDialogBtn"
                style=" width: 80px; background-color: #c8ebf7; font-size: x-small;">

              <dialog id="desc_dialog" class="dialog_box">
                <div class="dialog">
                  <form class="form-group" action="{{ url_for('user_desc') }}" method="post">
                    <input type="text" class="form-control" name="user_desc" placeholder="New description please"
                      id="user_desc" required>
                    <label> </label>
                    <input type="submit" value="Submit" class="form-control btn" name=""
                      style="width:80px; margin-top: 10px; background-color: #c8ebf7;">
                  </form>
                </div>
              </dialog>
            </div>

            <div class="col-4 currently_reading">

            </div>

            <hr>

            <div class="container text-center container_widget">
              <div class="row">
                {% with messages = get_flashed_messages() %}
                {% if messages %}
                <ul class="flashes">
                  {% for message in messages %}
                  <li>{{ message }}</li>
                  {% endfor %}
                </ul>
                {% endif %}
                {% endwith %}

                <div class="col widget">
                  <p>Favorite book</p>
                  {% if favorite_book %}
                  <img src="{{ favorite_book }}" alt="favorite_book">
                  <!--Dialog-->
                  {% else %}
                  <p>No favorite book selected</p>
                  <input type="submit" value="Select Book" class="form-control btn pfp_btn" name=""
                    id="openfavbookDialogBtn" style=" width: 80px; background-color: #c8ebf7; font-size: x-small;">

                  <dialog id="favbook_dialog" class="dialog_box">
                    <div class="dialog">
                      <form class="form-group" action="{{ url_for('fav_book') }}" method="post">
                        <input type="text" class="form-control" name="favbook_desc"
                          placeholder="Pick favorite book please" id="favbook_desc" required>
                        <label> </label>
                        <input type="submit" value="Submit" class="form-control btn" name=""
                          style="width:80px; margin-top: 10px; background-color: #c8ebf7;">
                      </form>
                    </div>
                  </dialog>
                  {% endif %}
                </div>

                <div class="col widget">
                  <p>Favourite quote:</p>
                  <p><i>"Just give me the f*cking valium" -Girl, Interrupted</i></p>
                </div>
                <div class="col widget">
                  <p>Least favourite book</p>
                  <img
                    src="https://m.media-amazon.com/images/W/IMAGERENDERING_521856-T1/images/I/41JFqILaXyL._SY291_BO1,204,203,200_QL40_FMwebp_.jpg"
                    alt="the great gatsby">
                </div>
              </div>
            </div>

            <hr>

            <!--Hela denna ska bli till en forloop-->
            <div class="col">
              <div class="col-6 col-sm-3 mx-auto posts" style="width: 500px;">
                <div class="col user user_post">
                  <img src="{{pfp}}" alt="">
                  <p>{{username}}</p>
                </div>
                <div class="col">
                  <p class="content">
                    Hello everyone! How are you? Fine, thank you!
                  </p>
                </div>
                <div class="col text-center">
                  <form action="POST">
                    <textarea placeholder="Add comment"></textarea>
                    <input type="submit" value="Send" class="submit_button">
                  </form>
                </div>
              </div>
            </div>
            <!--Hit-->
          </div>



          <div class="col-2">
            <!--Empty Sides-->
          </div>
        </div> <!--Hela row slut-->
      </div> <!--Hela container slut-->


      <script>
        const dialog = document.querySelector('#pfp_dialog');
        const openpfpDialogBtn = document.querySelector('#openpfpDialogBtn');
        const dialog_desc = document.querySelector('#desc_dialog');
        const opendescpDialogBtn = document.querySelector('#opendescDialogBtn');
        const favbook_desc = document.querySelector('#favbook_dialog');
        const openfavbookDialogBtn = document.querySelector('#openfavbookDialogBtn');

        openpfpDialogBtn.addEventListener('click', () => {
          dialog.showModal();
        });

        opendescDialogBtn.addEventListener('click', () => {
          dialog_desc.showModal();
        });

        openfavbookDialogBtn.addEventListener('click', () => {
          favbook_desc.showModal();
        });

        dialog.addEventListener('close', () => {
          document.querySelector('form').reset();
        });

        desc_dialog.addEventListener('close', () => {
          document.querySelector('form').reset();
        });

        favbook_desc.addEventListener('close', () => {
          document.querySelector('form').reset();
        });
      </script>

</body>